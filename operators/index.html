
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive, easy-to-follow guide for Kubernetes">
      
      
        <meta name="author" content="Aaron Braundmeier">
      
      
        <link rel="canonical" href="https://www.k8s.guide/operators/">
      
      
        <link rel="prev" href="../statefulsets/">
      
      
        <link rel="next" href="../kubernetes-api/">
      
      
      <link rel="icon" href="../logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>Operators - Kubernetes Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Ubuntu";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="/stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-WF0BEBS62L"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-WF0BEBS62L",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-WF0BEBS62L",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kubernetes-operators" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Kubernetes Guide" class="md-header__button md-logo" aria-label="Kubernetes Guide" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kubernetes Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Operators
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Kubernetes Guide" class="md-nav__button md-logo" aria-label="Kubernetes Guide" data-md-component="logo">
      
  <img src="../logo.png" alt="logo">

    </a>
    Kubernetes Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 12c2.5 0 4.5 2 4.5 4.5 0 .88-.25 1.71-.69 2.4l3.08 3.1L21 23.39l-3.12-3.07c-.69.43-1.51.68-2.38.68-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5m0 2a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5M5 3h14c1.11 0 2 .89 2 2v8.03c-.5-.8-1.19-1.49-2-2.03V5H5v14h4.5c.31.75.76 1.42 1.31 2H5c-1.11 0-2-.89-2-2V5c0-1.11.89-2 2-2m2 4h10v2H7V7m0 4h5.03c-.8.5-1.49 1.19-2.03 2H7v-2m0 4h2.17c-.11.5-.17 1-.17 1.5v.5H7v-2Z"/></svg>
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../local-setup/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 6h16v10H4m16 2a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4c-1.11 0-2 .89-2 2v10a2 2 0 0 0 2 2H0v2h24v-2h-4Z"/></svg>
  
  <span class="md-ellipsis">
    Local Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pods/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.12 5h13.75l-.94-1h-12l-.81 1m15.42.23c.29.34.46.77.46 1.27V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6.5c0-.5.17-.93.46-1.27l1.38-1.68C5.12 3.21 5.53 3 6 3h12c.47 0 .88.21 1.15.55l1.39 1.68M6 18h6v-3H6v3Z"/></svg>
  
  <span class="md-ellipsis">
    Pods
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../namespaces/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 3h1v2H3V4a1 1 0 0 1 1-1m16 0a1 1 0 0 1 1 1v1h-2V3h1m-5 2V3h2v2h-2m-4 0V3h2v2h-2M7 5V3h2v2H7m14 15a1 1 0 0 1-1 1h-1v-2h2v1m-6 1v-2h2v2h-2m-4 0v-2h2v2h-2m-4 0v-2h2v2H7m-3 0a1 1 0 0 1-1-1v-1h2v2H4m-1-6h2v2H3v-2m18 0v2h-2v-2h2M3 11h2v2H3v-2m18 0v2h-2v-2h2M3 7h2v2H3V7m18 0v2h-2V7h2Z"/></svg>
  
  <span class="md-ellipsis">
    Namespaces
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deployments/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.65 6.35A7.958 7.958 0 0 0 12 4a8 8 0 0 0-8 8 8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6 6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35Z"/></svg>
  
  <span class="md-ellipsis">
    Deployments
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../statefulsets/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 12h2v2h-2v-2m-4 4h2v2h-2v-2m6 1c0 .55-.45 1-1 1h-1v-2h2v1M7 4h1v2H6V5c0-.55.45-1 1-1m12 0c.55 0 1 .45 1 1v1h-2V4h1m-5 2V4h2v2h-2m-4 0V4h2v2h-2m0 12v-2h2v2h-2m-3 0c-.55 0-1-.45-1-1v-1h2v2H7m-1-6h2v2H6v-2m0-4h2v2H6V8m14 0v2h-2V8h2M3 8h1v12h12v1c0 .54-.43 1-.97 1H3c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1Z"/></svg>
  
  <span class="md-ellipsis">
    StatefulSets
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5Z"/></svg>
  
  <span class="md-ellipsis">
    Operators
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5Z"/></svg>
  
  <span class="md-ellipsis">
    Operators
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-operators" class="md-nav__link">
    <span class="md-ellipsis">
      What are Operators?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detailed Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-modification" class="md-nav__link">
    <span class="md-ellipsis">
      User Modification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-server-interaction" class="md-nav__link">
    <span class="md-ellipsis">
      API Server Interaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-watches-custom-resource" class="md-nav__link">
    <span class="md-ellipsis">
      Operator Watches Custom Resource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-takes-action" class="md-nav__link">
    <span class="md-ellipsis">
      Operator Takes Action
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-adjustment" class="md-nav__link">
    <span class="md-ellipsis">
      State Adjustment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continuous-monitoring-and-reconciliation" class="md-nav__link">
    <span class="md-ellipsis">
      Continuous Monitoring and Reconciliation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-and-using-operators" class="md-nav__link">
    <span class="md-ellipsis">
      Building and Using Operators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../kubernetes-api/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 7H5a2 2 0 0 0-2 2v8h2v-4h2v4h2V9a2 2 0 0 0-2-2m0 4H5V9h2m7-2h-4v10h2v-4h2a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2m0 4h-2V9h2m6 0v6h1v2h-4v-2h1V9h-1V7h4v2Z"/></svg>
  
  <span class="md-ellipsis">
    Kubernetes API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../crd/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.6 16.6 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4m-5.2 0L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4Z"/></svg>
  
  <span class="md-ellipsis">
    Custom Resources
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2v6h2v3H5c-1.11 0-2 .89-2 2v3H1v6h6v-6H5v-3h6v3H9v6h6v-6h-2v-3h6v3h-2v6h6v-6h-2v-3c0-1.11-.89-2-2-2h-6V8h2V2H9Z"/></svg>
  
  <span class="md-ellipsis">
    Services
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../networking/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15 20a1 1 0 0 0-1-1h-1v-2h4a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h4v2h-1a1 1 0 0 0-1 1H2v2h7a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h7v-2h-7m-8-5V5h10v10H7Z"/></svg>
  
  <span class="md-ellipsis">
    Networking
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ingress/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17 3 5.25 4.5L17 12l5.25 4.5L17 21v-3h-2.74l-2.82-2.82 2.12-2.12L15.5 15H17V9h-1.5l-9 9H2v-3h3.26l9-9H17V3M2 6h4.5l2.82 2.82-2.12 2.12L5.26 9H2V6Z"/></svg>
  
  <span class="md-ellipsis">
    Ingress
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4Z"/></svg>
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../configmaps-secrets/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17a2 2 0 0 1-2-2c0-1.11.89-2 2-2a2 2 0 0 1 2 2 2 2 0 0 1-2 2m6 3V10H6v10h12m0-12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10c0-1.11.89-2 2-2h1V6a5 5 0 0 1 5-5 5 5 0 0 1 5 5v2h1m-6-5a3 3 0 0 0-3 3v2h6V6a3 3 0 0 0-3-3Z"/></svg>
  
  <span class="md-ellipsis">
    ConfigMaps & Secrets
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../helm/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9M12 4.15l-1.89 1.07L16 8.61l1.96-1.11L12 4.15M6.04 7.5 12 10.85l1.96-1.1-5.88-3.4L6.04 7.5M5 15.91l6 3.38v-6.71L5 9.21v6.7m14 0v-6.7l-6 3.37v6.71l6-3.38Z"/></svg>
  
  <span class="md-ellipsis">
    Helm
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12h7c-.53 4.11-3.28 7.78-7 8.92V12H5V6.3l7-3.11M12 1 3 5v6c0 5.55 3.84 10.73 9 12 5.16-1.27 9-6.45 9-12V5l-9-4Z"/></svg>
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-operators" class="md-nav__link">
    <span class="md-ellipsis">
      What are Operators?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Detailed Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-modification" class="md-nav__link">
    <span class="md-ellipsis">
      User Modification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-server-interaction" class="md-nav__link">
    <span class="md-ellipsis">
      API Server Interaction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-watches-custom-resource" class="md-nav__link">
    <span class="md-ellipsis">
      Operator Watches Custom Resource
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operator-takes-action" class="md-nav__link">
    <span class="md-ellipsis">
      Operator Takes Action
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-adjustment" class="md-nav__link">
    <span class="md-ellipsis">
      State Adjustment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continuous-monitoring-and-reconciliation" class="md-nav__link">
    <span class="md-ellipsis">
      Continuous Monitoring and Reconciliation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-and-using-operators" class="md-nav__link">
    <span class="md-ellipsis">
      Building and Using Operators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="kubernetes-operators">Kubernetes Operators</h1>
<p>Kubernetes Operators extend the functionality of Kubernetes by automating the management of complex applications. They provide a powerful way to manage application-specific logic and stateful workloads.</p>
<h2 id="what-are-operators">What are Operators?</h2>
<h3>Introduction to Operators</h3>

<p>Kubernetes Operators are software extensions that use custom resources to manage applications and their components. They follow Kubernetes principles, notably the control loop, to automate tasks beyond the capabilities of standard Kubernetes resources.</p>
<h3>Purpose of Operators</h3>

<p>Operators are designed to automate the entire lifecycle of complex applications, including:</p>
<ul>
<li><strong>Installation:</strong> Deploying and configuring applications.</li>
<li><strong>Management:</strong> Managing the application's runtime configuration.</li>
<li><strong>Scaling:</strong> Adjusting resources in response to changing workloads.</li>
<li><strong>Healing:</strong> Detecting and recovering from failures.</li>
<li><strong>Upgrades:</strong> Updating the application to new versions.</li>
</ul>
<h3>Key Concepts</h3>

<p>Operators extend Kubernetes using the following components:</p>
<ul>
<li><strong>Custom Resource Definitions (CRDs):</strong> Define new types of resources to represent the application and its components.</li>
<li><strong>Custom Controllers:</strong> Monitor the state of custom resources and take action to reconcile the actual state with the desired state.</li>
</ul>
<h2 id="detailed-workflow">Detailed Workflow</h2>
<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="572px" height="316px" viewBox="-0.5 -0.5 572 316" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2024-06-07T18:26:43.854Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36&quot; version=&quot;24.5.2&quot; etag=&quot;db8ZjHMluWZlku78tqoX&quot; type=&quot;google&quot; scale=&quot;1&quot; border=&quot;0&quot;&gt;&#10;  &lt;diagram name=&quot;Page-1&quot; id=&quot;LoclE3KB7aoZN5bFUWDR&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1609&quot; dy=&quot;-1335&quot; grid=&quot;0&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;0&quot; pageScale=&quot;1&quot; pageWidth=&quot;850&quot; pageHeight=&quot;1100&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;2&quot; value=&quot;&amp;lt;font style=&amp;quot;font-size: 21px;&amp;quot;&amp;gt;custom resource&amp;lt;/font&amp;gt;&quot; style=&quot;rounded=0;whiteSpace=wrap;html=1;shadow=1;fillColor=none;fontColor=#333333;strokeColor=#000000;strokeWidth=2;fontFamily=Ubuntu;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DUbuntu;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-555&quot; y=&quot;2053&quot; width=&quot;146&quot; height=&quot;70&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;3&quot; value=&quot;&quot; style=&quot;aspect=fixed;sketch=0;html=1;dashed=0;whitespace=wrap;verticalLabelPosition=bottom;verticalAlign=top;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];shape=mxgraph.kubernetes.icon2;prIcon=crd;shadow=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-579&quot; y=&quot;2023&quot; width=&quot;50&quot; height=&quot;48&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;4&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;endArrow=block;endFill=1;dashed=1;flowAnimation=1;&quot; edge=&quot;1&quot; source=&quot;6&quot; target=&quot;2&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;5&quot; value=&quot;modify&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontFamily=Ubuntu;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DUbuntu;fontSize=13;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;4&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-0.2015&quot; y=&quot;1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;6&quot; value=&quot;&quot; style=&quot;fillColor=#000000;verticalLabelPosition=bottom;sketch=0;html=1;strokeColor=none;verticalAlign=top;align=center;points=[[0.145,0.145,0],[0.5,0,0],[0.855,0.145,0],[1,0.5,0],[0.855,0.855,0],[0.5,1,0],[0.145,0.855,0],[0,0.5,0]];pointerEvents=1;shape=mxgraph.cisco_safe.compositeIcon;bgIcon=ellipse;resIcon=mxgraph.cisco_safe.capability.user;aspect=fixed;strokeWidth=500;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-780&quot; y=&quot;2048.5&quot; width=&quot;79&quot; height=&quot;79&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;7&quot; value=&quot;&amp;lt;font style=&amp;quot;font-size: 21px;&amp;quot; data-font-src=&amp;quot;https://fonts.googleapis.com/css?family=Ubuntu&amp;quot; face=&amp;quot;Ubuntu&amp;quot;&amp;gt;operator&amp;lt;/font&amp;gt;&quot; style=&quot;verticalLabelPosition=bottom;html=1;verticalAlign=top;align=center;strokeColor=#666666;fillColor=#f5f5f5;shape=mxgraph.azure.cloud_service;shadow=1;strokeWidth=2;fontColor=#333333;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-540.75&quot; y=&quot;2205&quot; width=&quot;115.75&quot; height=&quot;97.4&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;8&quot; value=&quot;&quot; style=&quot;aspect=fixed;sketch=0;html=1;dashed=0;whitespace=wrap;verticalLabelPosition=bottom;verticalAlign=top;fillColor=#2875E2;strokeColor=#ffffff;points=[[0.005,0.63,0],[0.1,0.2,0],[0.9,0.2,0],[0.5,0,0],[0.995,0.63,0],[0.72,0.99,0],[0.5,1,0],[0.28,0.99,0]];shape=mxgraph.kubernetes.icon2;kubernetesLabel=1;prIcon=api;shadow=1;&quot; vertex=&quot;1&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-305&quot; y=&quot;2198&quot; width=&quot;89.58&quot; height=&quot;86&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;9&quot; style=&quot;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.245;entryY=0.119;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;endArrow=block;endFill=1;dashed=1;flowAnimation=1;&quot; edge=&quot;1&quot; source=&quot;2&quot; target=&quot;7&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;10&quot; value=&quot;change&amp;lt;div style=&amp;quot;font-size: 13px;&amp;quot;&amp;gt;events&amp;lt;/div&amp;gt;&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontFamily=Ubuntu;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DUbuntu;fontSize=13;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;9&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-0.1053&quot; y=&quot;1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;11&quot; style=&quot;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.769;exitY=0.071;exitDx=0;exitDy=0;strokeWidth=2;endArrow=block;endFill=1;dashed=1;flowAnimation=1;exitPerimeter=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;&quot; edge=&quot;1&quot; source=&quot;7&quot; target=&quot;2&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;-415&quot; y=&quot;2171&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;12&quot; value=&quot;watch&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontFamily=Ubuntu;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DUbuntu;fontSize=13;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;11&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-0.0687&quot; y=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;13&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.97;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.005;entryY=0.63;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;endArrow=block;endFill=1;dashed=1;flowAnimation=1;&quot; edge=&quot;1&quot; source=&quot;7&quot; target=&quot;8&quot; parent=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;14&quot; value=&quot;adjust&amp;lt;div style=&amp;quot;font-size: 13px;&amp;quot;&amp;gt;state&amp;lt;/div&amp;gt;&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontFamily=Ubuntu;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DUbuntu;fontSize=13;&quot; vertex=&quot;1&quot; connectable=&quot;0&quot; parent=&quot;13&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-0.1386&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs><style>@keyframes ge-flow-animation-IwV6gX5pt4P32jp4p6AM {&#xa;  to {&#xa;    stroke-dashoffset: 0;&#xa;  }&#xa;}</style><style type="text/css">@import url(https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500);&#xa;@import url(https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;500);&#xa;</style></defs><g><g style="filter: drop-shadow(rgba(0, 0, 0, 0.25) 2px 3px 2px);"><rect x="225" y="34" width="146" height="70" fill="none" stroke="#000000" stroke-width="2" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 144px; height: 1px; padding-top: 69px; margin-left: 226px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Ubuntu; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 21px;">custom resource</font></div></div></div></foreignObject><text x="298" y="73" fill="#333333" font-family="Ubuntu" font-size="12px" text-anchor="middle">custom resource</text></switch></g></g><g style="filter: drop-shadow(rgba(0, 0, 0, 0.25) 2px 3px 2px);"><path d="M 225.82 4.03 C 225.38 4.05 224.94 4.16 224.56 4.36 L 207.37 12.55 C 206.47 12.99 205.81 13.81 205.59 14.77 L 201.34 33.22 C 201.15 34.07 201.31 34.98 201.78 35.72 C 201.86 35.8 201.92 35.88 201.97 35.99 L 213.87 50.77 C 214.5 51.53 215.46 52 216.45 52 L 235.53 52 C 236.51 52 237.47 51.53 238.1 50.77 L 250 35.96 C 250.6 35.2 250.85 34.18 250.63 33.22 L 246.38 14.77 C 246.16 13.81 245.5 12.99 244.6 12.55 L 227.41 4.36 C 226.92 4.11 226.37 4 225.82 4.03 Z" fill="#ffffff" stroke="none" pointer-events="all"/><path d="M 225.83 5.47 C 225.42 5.49 225.01 5.59 224.65 5.77 L 208.49 13.48 C 207.64 13.89 207.02 14.66 206.82 15.57 L 202.82 32.91 C 202.64 33.71 202.8 34.56 203.23 35.25 C 203.31 35.33 203.36 35.41 203.41 35.51 L 214.6 49.4 C 215.19 50.12 216.09 50.56 217.02 50.56 L 234.95 50.56 C 235.88 50.56 236.78 50.12 237.38 49.4 L 248.56 35.49 C 249.13 34.76 249.36 33.81 249.15 32.91 L 245.16 15.57 C 244.95 14.66 244.33 13.89 243.48 13.48 L 227.33 5.77 C 226.86 5.54 226.35 5.44 225.83 5.47 Z" fill="#2875e2" stroke="none" pointer-events="all"/><path d="M 239.37 27.31 L 237.31 27.31 L 237.31 21.83 C 237.31 20.32 236.08 19.09 234.57 19.09 L 229.09 19.09 L 229.09 17.03 C 229.09 15.14 227.55 13.6 225.66 13.6 C 223.77 13.6 222.23 15.14 222.23 17.03 L 222.23 19.09 L 216.74 19.09 C 215.24 19.09 214.01 20.32 214.01 21.83 L 214.01 27.04 L 216.06 27.04 C 218.1 27.05 219.75 28.7 219.76 30.74 C 219.76 32.78 218.1 34.44 216.06 34.44 L 214 34.44 L 214 39.66 C 214 41.16 215.24 42.4 216.74 42.4 L 221.95 42.4 L 221.95 40.34 C 221.96 38.3 223.61 36.64 225.66 36.64 C 227.7 36.64 229.35 38.3 229.36 40.34 L 229.36 42.4 L 234.57 42.4 C 236.08 42.4 237.31 41.16 237.31 39.66 L 237.31 34.17 L 239.37 34.17 C 241.26 34.17 242.8 32.64 242.8 30.74 C 242.8 28.85 241.26 27.31 239.37 27.31 Z" fill="#ffffff" stroke="none" pointer-events="all"/></g><g><path d="M 79 69 L 214.76 69" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke" style="animation: 375ms linear 0s infinite normal none running ge-flow-animation-IwV6gX5pt4P32jp4p6AM; stroke-dashoffset: 12;"/><path d="M 222.76 69 L 214.76 73 L 214.76 65 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 68px; margin-left: 138px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 13px; font-family: Ubuntu; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">modify</div></div></div></foreignObject><text x="138" y="72" fill="rgb(0, 0, 0)" font-family="Ubuntu" font-size="13px" text-anchor="middle">modify</text></switch></g></g><g><rect x="0" y="29.5" width="79" height="79" fill="none" stroke="none" pointer-events="all"/><path d="M 0 69 C 0 47.29 17.77 29.5 39.5 29.5 C 61.45 29.5 79 47.29 79 69 C 79 90.93 61.45 108.5 39.5 108.5 C 17.77 108.5 0 90.93 0 69 Z M 31.61 47.08 C 31.61 51.39 35.17 54.78 39.49 54.78 C 44.03 54.78 47.41 51.39 47.41 47.08 C 47.41 42.99 44.03 39.38 39.49 39.38 C 35.17 39.38 31.61 42.99 31.61 47.08 Z M 47.6 95.68 C 48.58 70.77 48.58 70.77 48.58 70.77 C 49.78 70.77 49.78 70.77 49.78 70.77 C 49.78 92.13 49.78 92.13 49.78 92.13 C 49.78 94.3 51.38 95.86 53.35 95.86 C 55.3 95.86 56.9 94.3 56.9 92.13 C 56.9 65.83 56.9 65.83 56.9 65.83 C 56.9 61.48 53.74 57.96 49.78 57.96 C 29.43 57.96 29.43 57.96 29.43 57.96 C 25.47 57.96 22.13 61.48 22.13 65.83 C 22.13 92.13 22.13 92.13 22.13 92.13 C 22.13 94.3 23.9 95.86 25.86 95.86 C 27.87 95.86 29.43 94.3 29.43 92.13 C 29.43 70.77 29.43 70.77 29.43 70.77 C 30.63 70.77 30.63 70.77 30.63 70.77 C 31.61 95.68 31.61 95.68 31.61 95.68 L 47.6 95.68 Z" fill="#000000" stroke="none" pointer-events="all"/><ellipse cx="39.5" cy="69" rx="38.71" ry="38.71" fill="none" stroke="none" pointer-events="all"/><rect x="0" y="29.5" width="79" height="79" fill="none" stroke="none" pointer-events="all"/><path d="M 0 69 C 0 47.29 17.77 29.5 39.5 29.5 C 61.45 29.5 79 47.29 79 69 C 79 90.93 61.45 108.5 39.5 108.5 C 17.77 108.5 0 90.93 0 69 Z M 31.61 47.08 C 31.61 51.39 35.17 54.78 39.49 54.78 C 44.03 54.78 47.41 51.39 47.41 47.08 C 47.41 42.99 44.03 39.38 39.49 39.38 C 35.17 39.38 31.61 42.99 31.61 47.08 Z M 47.6 95.68 C 48.58 70.77 48.58 70.77 48.58 70.77 C 49.78 70.77 49.78 70.77 49.78 70.77 C 49.78 92.13 49.78 92.13 49.78 92.13 C 49.78 94.3 51.38 95.86 53.35 95.86 C 55.3 95.86 56.9 94.3 56.9 92.13 C 56.9 65.83 56.9 65.83 56.9 65.83 C 56.9 61.48 53.74 57.96 49.78 57.96 C 29.43 57.96 29.43 57.96 29.43 57.96 C 25.47 57.96 22.13 61.48 22.13 65.83 C 22.13 92.13 22.13 92.13 22.13 92.13 C 22.13 94.3 23.9 95.86 25.86 95.86 C 27.87 95.86 29.43 94.3 29.43 92.13 C 29.43 70.77 29.43 70.77 29.43 70.77 C 30.63 70.77 30.63 70.77 30.63 70.77 C 31.61 95.68 31.61 95.68 31.61 95.68 L 47.6 95.68 Z" fill="#000000" stroke="none" pointer-events="all"/></g><g style="filter: drop-shadow(rgba(0, 0, 0, 0.25) 2px 3px 2px);"><path d="M 289.61 205.06 C 295.04 192.18 309.22 186 321.84 191.01 C 334.46 196.01 341.1 210.44 336.92 223.82 C 344.19 224.95 350.24 230.2 352.62 237.44 C 354.99 244.67 353.29 252.68 348.21 258.21 C 343.13 263.73 335.52 265.84 328.47 263.69 C 329.39 269.87 325.92 275.85 320.23 277.87 C 314.55 279.89 308.29 277.37 305.38 271.9 C 300.3 279.58 291.32 283.4 282.52 281.62 C 273.72 279.84 266.78 272.8 264.83 263.69 C 252.83 262.33 243.34 255.39 241.29 246.47 C 239.24 237.55 245.1 228.66 255.82 224.4 C 253.39 215.19 257.34 205.45 265.38 200.84 C 273.42 196.24 283.44 197.98 289.61 205.06 Z M 314.39 207.4 L 309.89 214.44 L 301.44 213.26 L 302.57 220.89 L 295.81 226.75 L 302 231.44 L 301.44 240.23 L 308.76 239.06 L 314.39 246.1 L 319.46 238.48 L 327.91 240.23 L 326.22 230.85 L 333.54 226.75 L 326.22 221.47 L 327.91 213.26 L 319.46 214.44 Z M 286.23 226.75 L 281.73 233.79 L 273.84 232.03 L 273.84 240.82 L 266.52 246.68 L 273.84 250.2 L 272.72 259.58 L 281.73 258.41 L 286.23 266.03 L 290.74 259 L 299.19 259.58 L 298.06 251.38 L 305.94 245.51 L 297.5 241.41 L 299.19 232.61 L 290.18 233.79 Z" fill="#f5f5f5" stroke="#666666" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="314.96" cy="226.16" rx="6.758466329311016" ry="7.03587767878642" fill="#f5f5f5" stroke="#666666" stroke-width="2" pointer-events="all"/><ellipse cx="285.67" cy="246.1" rx="6.758466329311016" ry="7.03587767878642" fill="#f5f5f5" stroke="#666666" stroke-width="2" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 290px; margin-left: 297px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font face="Ubuntu" data-font-src="https://fonts.googleapis.com/css?family=Ubuntu" style="font-size: 21px;">operator</font></div></div></div></foreignObject><text x="297" y="302" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">operator</text></switch></g></g><g style="filter: drop-shadow(rgba(0, 0, 0, 0.25) 2px 3px 2px);"><path d="M 519.47 179.05 C 518.68 179.1 517.9 179.29 517.21 179.64 L 486.42 194.32 C 484.8 195.11 483.62 196.58 483.22 198.3 L 475.61 231.36 C 475.27 232.88 475.56 234.5 476.4 235.83 C 476.54 235.97 476.64 236.12 476.74 236.32 L 498.06 262.79 C 499.19 264.17 500.91 265 502.67 265 L 536.86 265 C 538.63 265 540.34 264.17 541.47 262.79 L 562.79 236.27 C 563.87 234.89 564.31 233.08 563.92 231.36 L 556.31 198.3 C 555.91 196.58 554.74 195.11 553.11 194.32 L 522.32 179.64 C 521.44 179.2 520.45 179 519.47 179.05 Z" fill="#ffffff" stroke="none" pointer-events="all"/><path d="M 519.49 181.63 C 518.75 181.67 518.01 181.86 517.37 182.18 L 488.42 195.98 C 486.9 196.72 485.79 198.11 485.42 199.72 L 478.26 230.79 C 477.94 232.23 478.22 233.75 479 235 C 479.14 235.13 479.23 235.27 479.32 235.46 L 499.36 260.34 C 500.42 261.64 502.04 262.42 503.7 262.42 L 535.83 262.42 C 537.5 262.42 539.11 261.64 540.17 260.34 L 560.21 235.41 C 561.23 234.12 561.64 232.41 561.27 230.79 L 554.12 199.72 C 553.75 198.11 552.64 196.72 551.11 195.98 L 522.17 182.18 C 521.34 181.76 520.41 181.58 519.49 181.63 Z" fill="#2875e2" stroke="none" pointer-events="all"/><path d="M 519.81 196.22 C 519.29 196.2 504.72 203.36 504.53 203.73 C 504.07 204.61 500.75 219.91 500.95 220.24 C 501.06 220.43 503.45 223.46 506.25 226.97 L 511.35 233.34 L 519.75 233.35 L 528.15 233.35 L 533.48 226.68 L 538.83 220.01 L 536.96 211.82 L 534.91 203.46 C 529.93 200.94 524.89 198.53 519.81 196.22 Z M 520.7 203.71 C 521.41 203.74 521.48 204.81 522.99 204.92 C 524.96 205.07 524.75 203.23 526.26 204.51 C 527.76 205.79 525.92 205.88 526.39 207.8 C 526.86 209.72 528.54 208.95 527.79 210.78 C 527.04 212.61 526.38 210.88 524.7 211.92 C 523.02 212.96 524.27 214.32 522.3 214.17 C 520.33 214.03 521.77 212.87 520.26 211.59 C 518.75 210.31 517.84 211.92 517.37 210 C 516.9 208.08 518.45 209.09 519.2 207.26 C 519.95 205.43 518.14 205.06 519.82 204.02 C 520.03 203.9 520.2 203.81 520.35 203.76 C 520.49 203.72 520.6 203.7 520.7 203.7 Z M 522.67 205.87 C 522.38 205.87 522.1 205.91 521.82 205.99 C 520.31 206.45 519.46 208.04 519.91 209.56 C 520.37 211.07 521.96 211.92 523.48 211.46 C 524.99 211.01 525.84 209.41 525.39 207.9 C 525.02 206.7 523.93 205.88 522.67 205.87 Z M 511.37 210.79 C 511.56 210.8 511.74 210.83 511.93 210.89 C 513.74 211.45 511.9 212.4 513.19 213.79 C 514.48 215.17 515.56 213.41 515.99 215.25 C 516.41 217.1 514.66 215.98 514.11 217.8 C 513.55 219.61 515.62 219.66 514.24 220.96 C 512.85 222.25 512.95 220.18 511.1 220.6 C 509.25 221.02 510.24 222.85 508.43 222.29 C 506.61 221.74 508.46 220.79 507.16 219.39 C 505.87 218 504.79 219.78 504.37 217.93 C 503.94 216.07 505.69 217.2 506.24 215.38 C 506.8 213.57 504.72 213.52 506.11 212.22 C 507.5 210.93 507.4 213 509.25 212.58 C 510.87 212.21 510.31 210.77 511.36 210.78 Z M 524.84 212.77 C 525.02 212.78 525.23 212.82 525.49 212.92 C 527.58 213.73 524.82 214.98 526.45 216.53 C 528.07 218.08 529.19 215.27 530.1 217.32 C 531.01 219.38 528.17 218.31 528.22 220.56 C 528.27 222.8 531.05 221.61 530.24 223.7 C 529.43 225.79 528.18 223.04 526.63 224.66 C 525.08 226.28 527.89 227.41 525.83 228.31 C 523.78 229.21 524.85 226.38 522.6 226.43 C 520.36 226.48 521.55 229.26 519.46 228.45 C 517.36 227.64 520.12 226.39 518.5 224.84 C 516.88 223.29 515.75 226.1 514.85 224.05 C 513.94 221.99 516.77 223.06 516.72 220.82 C 516.67 218.58 513.89 219.76 514.7 217.67 C 515.51 215.58 516.77 218.33 518.32 216.71 C 519.87 215.09 517.06 213.97 519.11 213.06 C 521.16 212.15 520.1 214.99 522.34 214.94 C 524.3 214.89 523.64 212.76 524.84 212.77 Z M 510.18 213.74 C 508.6 213.74 507.32 215.02 507.32 216.6 C 507.32 218.17 508.6 219.46 510.18 219.46 C 511.76 219.46 513.04 218.17 513.04 216.6 C 513.04 215.02 511.76 213.74 510.18 213.74 Z M 522.47 216.47 C 520.15 216.47 518.26 218.36 518.26 220.69 C 518.26 223.01 520.15 224.9 522.47 224.9 C 524.8 224.9 526.69 223.01 526.69 220.68 C 526.69 218.35 524.8 216.47 522.47 216.47 Z" fill="#ffffff" stroke="none" pointer-events="all"/><g fill="#ffffff" font-family="Arial,Helvetica" text-anchor="middle" font-size="17.2px"><text x="519.29" y="250.6">api</text></g></g><g><path d="M 261.5 104 L 266.94 187.38" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke" style="animation: 375ms linear 0s infinite normal none running ge-flow-animation-IwV6gX5pt4P32jp4p6AM; stroke-dashoffset: 12;"/><path d="M 267.46 195.36 L 262.95 187.64 L 270.93 187.12 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 146px; margin-left: 266px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 13px; font-family: Ubuntu; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">change<div style="font-size: 13px;">events</div></div></div></div></foreignObject><text x="266" y="150" fill="rgb(0, 0, 0)" font-family="Ubuntu" font-size="13px" text-anchor="middle">change...</text></switch></g></g><g><path d="M 328.26 192.92 L 333.78 114.21" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke" style="animation: 375ms linear 0s infinite normal none running ge-flow-animation-IwV6gX5pt4P32jp4p6AM; stroke-dashoffset: 12;"/><path d="M 334.34 106.23 L 337.77 114.49 L 329.79 113.93 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 152px; margin-left: 333px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 13px; font-family: Ubuntu; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">watch</div></div></div></foreignObject><text x="333" y="156" fill="rgb(0, 0, 0)" font-family="Ubuntu" font-size="13px" text-anchor="middle">watch</text></switch></g></g><g><path d="M 351.53 234.7 L 415.09 234.73 L 415.09 233.18 L 465.21 233.18" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="6 6" pointer-events="stroke" style="animation: 375ms linear 0s infinite normal none running ge-flow-animation-IwV6gX5pt4P32jp4p6AM; stroke-dashoffset: 12;"/><path d="M 473.21 233.18 L 465.21 237.18 L 465.21 229.18 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 235px; margin-left: 406px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 13px; font-family: Ubuntu; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">adjust<div style="font-size: 13px;">state</div></div></div></div></foreignObject><text x="406" y="239" fill="rgb(0, 0, 0)" font-family="Ubuntu" font-size="13px" text-anchor="middle">adjust...</text></switch></g></g></g></svg></p>
<h4 id="user-modification"><strong>User Modification</strong></h4>
<ul>
<li><strong>Action:</strong> A user modifies the custom resource to define or update the desired state of the application.</li>
<li><strong>Example:</strong> The user could be updating the version of the application or changing configuration parameters.</li>
</ul>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Example command to apply a change to a custom resource</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>custom-resource.yaml
</span></code></pre></div>
<h4 id="api-server-interaction"><strong>API Server Interaction</strong></h4>
<ul>
<li><strong>Action:</strong> The Kubernetes API server receives the modification request and processes it.</li>
<li><strong>Purpose:</strong> The API server validates and stores the new state of the custom resource.</li>
</ul>
<h4 id="operator-watches-custom-resource"><strong>Operator Watches Custom Resource</strong></h4>
<ul>
<li><strong>Action:</strong> The Operator, running as a controller within the cluster, continuously watches for changes to the custom resources.</li>
<li><strong>Purpose:</strong> The Operator detects the change event and identifies that an action is needed to reconcile the desired state with the actual state.</li>
</ul>
<h4 id="operator-takes-action"><strong>Operator Takes Action</strong></h4>
<ul>
<li><strong>Action:</strong> The Operator performs the necessary operations to adjust the state of the application to match the desired state defined in the custom resource.</li>
<li><strong>Examples:</strong> This could include creating, updating, or deleting resources such as Pods, Services, or ConfigMaps. The Operator might also perform application-specific actions like running a database migration or initiating a backup.</li>
</ul>
<h4 id="state-adjustment"><strong>State Adjustment</strong></h4>
<ul>
<li><strong>Action:</strong> The Operator adjusts the state of the application.</li>
<li><strong>Purpose:</strong> Ensures the actual state of the cluster matches the desired state defined in the custom resource.</li>
</ul>
<h4 id="continuous-monitoring-and-reconciliation"><strong>Continuous Monitoring and Reconciliation</strong></h4>
<ul>
<li><strong>Action:</strong> The Operator continuously monitors the application and custom resources.</li>
<li><strong>Purpose:</strong> Automatically reconciles any discrepancies between the desired state and the actual state, ensuring the application runs as intended over time.</li>
</ul>
<h2 id="building-and-using-operators">Building and Using Operators</h2>
<h3>Building an Operator</h3>

<p>Building a Kubernetes Operator typically involves the following steps:</p>
<ol>
<li><strong>Define a Custom Resource Definition (CRD):</strong> The CRD defines the schema for the custom resource that represents the application.</li>
<li><strong>Implement a Custom Controller:</strong> The controller monitors the custom resource and implements the logic to manage the application.</li>
</ol>
<h4>Example CRD</h4>

<p>Define a CRD for a sample application (<code>sample-crd.yaml</code>):
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apiextensions.k8s.io/v1</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CustomResourceDefinition</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">samples.apps.example.com</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps.example.com</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="nt">versions</span><span class="p">:</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">served</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">storage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">schema</span><span class="p">:</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">      </span><span class="nt">openAPIV3Schema</span><span class="p">:</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">        </span><span class="nt">properties</span><span class="p">:</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">          </span><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">            </span><span class="nt">properties</span><span class="p">:</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">              </span><span class="nt">replicas</span><span class="p">:</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">  </span><span class="nt">scope</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespaced</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="w">  </span><span class="nt">names</span><span class="p">:</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">    </span><span class="nt">plural</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">samples</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">    </span><span class="nt">singular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sample</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sample</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">    </span><span class="nt">shortNames</span><span class="p">:</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">smpl</span>
</span></code></pre></div></p>
<h4>Example Custom Resource</h4>

<p>Define a custom resource that uses the CRD (<code>sample-cr.yaml</code>):
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps.example.com/v1</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sample</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-sample</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span></code></pre></div></p>
<h4>Implementing the Controller</h4>

<p>The controller is implemented using a programming language like Go. The <a href="https://sdk.operatorframework.io/">Operator SDK</a> provides tools and libraries to simplify this process.</p>
<h4>Install Operator SDK</h4>

<p>Install the Operator SDK CLI:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>curl<span class="w"> </span>-LO<span class="w"> </span>https://github.com/operator-framework/operator-sdk/releases/download/v1.16.0/operator-sdk_linux_amd64
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>$<span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>operator-sdk_linux_amd64
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>$<span class="w"> </span>sudo<span class="w"> </span>mv<span class="w"> </span>operator-sdk_linux_amd64<span class="w"> </span>/usr/local/bin/operator-sdk
</span></code></pre></div></p>
<h4>Create a New Operator Project</h4>

<p>Create a new project using the Operator SDK:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$<span class="w"> </span>operator-sdk<span class="w"> </span>init<span class="w"> </span>--domain<span class="w"> </span>example.com<span class="w"> </span>--repo<span class="w"> </span>github.com/example/my-operator
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>$<span class="w"> </span>operator-sdk<span class="w"> </span>create<span class="w"> </span>api<span class="w"> </span>--group<span class="w"> </span>apps<span class="w"> </span>--version<span class="w"> </span>v1<span class="w"> </span>--kind<span class="w"> </span>Sample<span class="w"> </span>--resource<span class="w"> </span>--controller
</span></code></pre></div></p>
<h4>Implement Reconciliation Logic</h4>

<p>In the generated controller, implement the reconciliation logic to manage the custom resource:
<div class="language-go highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">SampleReconciler</span><span class="p">)</span><span class="w"> </span><span class="nx">Reconcile</span><span class="p">(</span><span class="nx">req</span><span class="w"> </span><span class="nx">ctrl</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">ctrl</span><span class="p">.</span><span class="nx">Result</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">()</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nx">log</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">Log</span><span class="p">.</span><span class="nx">WithValues</span><span class="p">(</span><span class="s">&quot;sample&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">NamespacedName</span><span class="p">)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="c1">// Fetch the Sample instance</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">sample</span><span class="w"> </span><span class="nx">appsV1</span><span class="p">.</span><span class="nx">Sample</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">r</span><span class="p">.</span><span class="nx">Get</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">.</span><span class="nx">NamespacedName</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">sample</span><span class="p">);</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Error</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;unable to fetch Sample&quot;</span><span class="p">)</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">ctrl</span><span class="p">.</span><span class="nx">Result</span><span class="p">{},</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">IgnoreNotFound</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="c1">// TODO: Add application management logic here</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">ctrl</span><span class="p">.</span><span class="nx">Result</span><span class="p">{},</span><span class="w"> </span><span class="kc">nil</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="p">}</span>
</span></code></pre></div></p>
<h3>Deploying an Operator</h3>

<h4>Build and Push the Operator Image</h4>

<p>Build the Operator image and push it to a container registry:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>make<span class="w"> </span>docker-build<span class="w"> </span>docker-push<span class="w"> </span><span class="nv">IMG</span><span class="o">=</span>&lt;your-image-registry&gt;/my-operator:v0.1.0
</span></code></pre></div></p>
<h4>Deploy the Operator</h4>

<p>Deploy the Operator to the Kubernetes cluster:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>$<span class="w"> </span>make<span class="w"> </span>deploy<span class="w"> </span><span class="nv">IMG</span><span class="o">=</span>&lt;your-image-registry&gt;/my-operator:v0.1.0
</span></code></pre></div></p>
<h3>Using the Operator</h3>

<p>Create and manage custom resources using the Operator:</p>
<ol>
<li>
<p><strong>Apply the CRD:</strong>
   <div class="language-sh highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>sample-crd.yaml
</span></code></pre></div></p>
</li>
<li>
<p><strong>Create a Custom Resource:</strong>
   <div class="language-sh highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>sample-cr.yaml
</span></code></pre></div></p>
</li>
<li>
<p><strong>Check the Status:</strong>
   <div class="language-sh highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>samples.apps.example.com
</span></code></pre></div></p>
</li>
</ol>
<h3>Advanced Operator Features</h3>

<p>Operators can include advanced features such as:</p>
<ul>
<li><strong>Leader Election:</strong> Ensures only one instance of the Operator is active at a time.</li>
<li><strong>Metrics and Monitoring:</strong> Collect and expose metrics for monitoring the Operator's performance.</li>
<li><strong>Webhooks:</strong> Implement validation and mutating webhooks to enforce policies.</li>
</ul>
<h2 id="summary">Summary</h2>
<p>Kubernetes Operators provide a powerful way to manage complex applications by extending Kubernetes with custom resources and controllers. By building and using Operators, you can automate the entire lifecycle of applications, ensuring they are deployed, managed, and scaled efficiently. Operators are a key component in managing stateful and complex workloads in a Kubernetes-native way.</p>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../statefulsets/" class="md-footer__link md-footer__link--prev" aria-label="Previous: StatefulSets">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                StatefulSets
              </div>
            </div>
          </a>
        
        
          
          <a href="../kubernetes-api/" class="md-footer__link md-footer__link--next" aria-label="Next: Kubernetes API">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Kubernetes API
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "navigation.footer", "navigation.tracking", "palette.toggle", "content.tooltips", "content.code.copy", "content.code.select"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
        <script src="../javascripts/extra.js"></script>
      
        <script src="../javascripts/adsense.js"></script>
      
    
  </body>
</html>